<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Progressive Web Apps</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="manifest.json" />
  </head>
  <body>
    <h1>Welcome to PWA</h1>
    <ul>
      <li><a href="pages/advantages.html">Advantages</a></li>
      <li><a href="pages/serviceworker.html">Service Worker</a></li>
    </ul>
    <img src="images/banner.png" />
    <p>
      Progressive web apps could be the next big thing for the mobile web.
      Originally proposed by Google in 2015, they have already attracted a lot
      of attention because of the relative ease of development and the almost
      instant wins for the applicationâ€™s user experience.
    </p>
    <p>
      A progressive web application takes advantage of the latest technologies
      to combine the best of web and mobile apps. Think of it as a website built
      using web technologies but that acts and feels like an app. Recent
      advancements in the browser and in the availability of service workers and
      in the Cache and Push APIs have enabled web developers to allow users to
      install web apps to their home screen, receive push notifications and even
      work offline.
    </p>
    <button id="btnAdd">Add</button>
    <script>
    
   let deferredPrompt;

    window.addEventListener('beforeinstallprompt', function(event) {
      // Prevent Chrome 67 and earlier from automatically showing the prompt
      e.preventDefault();
      // Stash the event so it can be triggered later.
      deferredPrompt = e;
    });

    // Installation must be done by a user gesture! Here, the button click
    btnAdd.addEventListener('click', (e) => {
      // hide our user interface that shows our A2HS button
      btnAdd.style.display = 'none';
      // Show the prompt
      deferredPrompt.prompt();
      // Wait for the user to respond to the prompt
      deferredPrompt.userChoice
        .then((choiceResult) => {
          if (choiceResult.outcome === 'accepted') {
            console.log('User accepted the A2HS prompt');
          } else {
            console.log('User dismissed the A2HS prompt');
          }
          deferredPrompt = null;
        });
    });

    </script>
      <script src="js/main.js"></script>
  </body>

</html>
